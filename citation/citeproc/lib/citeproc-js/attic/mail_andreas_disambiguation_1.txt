                                                                                                                                                                                                                                                               
Delivered-To: biercenator@gmail.com
Received: by 10.14.119.203 with SMTP id n51cs42863eeh;
        Sun, 30 Oct 2011 19:39:10 -0700 (PDT)
Received: by 10.42.164.194 with SMTP id h2mr702651icy.44.1320028748246;
        Sun, 30 Oct 2011 19:39:08 -0700 (PDT)
Return-Path: <xbiblio-devel-bounces@lists.sourceforge.net>
Received: from lists.sourceforge.net (lists.sourceforge.net. [216.34.181.88])
        by mx.google.com with ESMTPS id az6si8940020icb.36.2011.10.30.19.39.06
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 30 Oct 2011 19:39:08 -0700 (PDT)
Received-SPF: pass (google.com: domain of xbiblio-devel-bounces@lists.sourceforge.net designates 216.34.181.88 as permitted sender) client-ip=216.34.181.88;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of xbiblio-devel-bounces@lists.sourceforge.net designates 216.34.181.88 as permitted sender) smtp.mail=xbiblio-devel-bounces@lists.sourceforge.net
Received: from localhost ([127.0.0.1] helo=sfs-ml-2.v29.ch3.sourceforge.com)
	by sfs-ml-2.v29.ch3.sourceforge.com with esmtp (Exim 4.76)
	(envelope-from <xbiblio-devel-bounces@lists.sourceforge.net>)
	id 1RKhmA-0000fy-85; Mon, 31 Oct 2011 02:39:02 +0000
Received: from sog-mx-1.v43.ch3.sourceforge.com ([172.29.43.191]
	helo=mx.sourceforge.net)
	by sfs-ml-2.v29.ch3.sourceforge.com with esmtp (Exim 4.76)
	(envelope-from <andrea.rossato@unitn.it>) id 1RKhm9-0000fr-2K
	for xbiblio-devel@lists.sourceforge.net; Mon, 31 Oct 2011 02:39:01 +0000
X-ACL-Warn: 
Received: from host118-2-static.225-95-b.business.telecomitalia.it
	([95.225.2.118] helo=gorgias.mine.nu)
	by sog-mx-1.v43.ch3.sourceforge.com with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.76) id 1RKhm7-0005Dr-9j
	for xbiblio-devel@lists.sourceforge.net; Mon, 31 Oct 2011 02:39:01 +0000
Received: from eeepc.nowhere.net (localhost [127.0.0.1])
	by gorgias.mine.nu (8.14.3/8.14.3) with ESMTP id p9V2JMrU014242
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <xbiblio-devel@lists.sourceforge.net>;
	Mon, 31 Oct 2011 03:19:22 +0100
Received: from eeepc.nowhere.net (localhost [127.0.0.1])
	by eeepc.nowhere.net (8.14.4/8.14.4) with ESMTP id p9V2JKj4023587
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <xbiblio-devel@lists.sourceforge.net>;
	Mon, 31 Oct 2011 03:19:21 +0100
Received: (from andrea@localhost)
	by eeepc.nowhere.net (8.14.4/8.14.4/Submit) id p9V2JI8l023575;
	Mon, 31 Oct 2011 03:19:18 +0100
X-Authentication-Warning: eeepc.nowhere.net: andrea set sender to
	andrea.rossato@unitn.it using -f
From: andrea rossato <andrea.rossato@unitn.it>
To: development discussion for xbiblio <xbiblio-devel@lists.sourceforge.net>
References: <CAJgpGgDgAY34j96eaFkwE_HAb8PEwsEnVaf3tTVPFfoJLcDoDA@mail.gmail.com>
Date: Mon, 31 Oct 2011 03:19:17 +0100
In-Reply-To: <CAJgpGgDgAY34j96eaFkwE_HAb8PEwsEnVaf3tTVPFfoJLcDoDA@mail.gmail.com>
	(Frank Bennett's message of "Sun, 31 Jul 2011 02:36:34 +0000")
Message-ID: <87aa8hgaxm.fsf@eeepc.nowhere.net>
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/23.3 (gnu/linux)
MIME-Version: 1.0
X-Greylist: Sender succeeded STARTTLS authentication, not delayed by
	milter-greylist-4.2.7 (gorgias.mine.nu [0.0.0.0]);
	Mon, 31 Oct 2011 03:19:23 +0100 (CET)
X-Spam-Score: 1.3 (+)
X-Spam-Report: Spam Filtering performed by mx.sourceforge.net.
	See http://spamassassin.org/tag/ for more details.
	1.3 URI_HEX URI: URI hostname has long hexadecimal sequence
X-Headers-End: 1RKhm7-0005Dr-9j
Subject: Re: [xbiblio-devel] Disambiguation: changes to test fixtures
X-BeenThere: xbiblio-devel@lists.sourceforge.net
X-Mailman-Version: 2.1.9
Precedence: list
Reply-To: development discussion for xbiblio
	<xbiblio-devel@lists.sourceforge.net>
List-Id: development discussion for xbiblio
	<xbiblio-devel.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/listinfo/xbiblio-devel>, 
	<mailto:xbiblio-devel-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=xbiblio-devel>
List-Post: <mailto:xbiblio-devel@lists.sourceforge.net>
List-Help: <mailto:xbiblio-devel-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/xbiblio-devel>, 
	<mailto:xbiblio-devel-request@lists.sourceforge.net?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: xbiblio-devel-bounces@lists.sourceforge.net

Hi Frank,

sorry I'm so slow in catching up... as usual.

Frank Bennett <biercenator@gmail.com> writes:

> Andrea, Sylvester:
>
> Quite some time ago, Andrea raised an objection to the spec
> description of disambiguation behavior, which I should have addressed,
> but didn't:
>
>   http://xbiblio-devel.2463403.n2.nabble.com/disambiguation-one-more-tt5131926.html#a5133985
>
> Rintze has proposed a revision that clarifies the behavior:
>
>   https://github.com/citation-style-language/documentation/pull/16
>
> Reviewing the amendments, I was reminded of a flaw in citeproc-js,
> which in some situations was failing to drop names that do not
> contribute to disambiguation. The failure is reflected in some of the
> fixtures in the test suite. I took another look at my code, and
> managed to clean up the behavior. The effect can be seen in the
> following changeset:
>
>   https://bitbucket.org/bdarcus/citeproc-test/changeset/e4225e251798
>
> The affected fixtures are linked below. Please take a look at them,
> and let us know whether you approve of the new behavior. The effect on
> the specification is outlined in comments to Rintze's github pull
> request, linked above.
>
>   https://bitbucket.org/bdarcus/citeproc-test/src/beda343d95bc/processor-tests/humans/disambiguate_AddNamesFailure.txt
>   https://bitbucket.org/bdarcus/citeproc-test/src/beda343d95bc/processor-tests/humans/disambiguate_AddNamesFailureWithAddGivenname.txt
>   https://bitbucket.org/bdarcus/citeproc-test/src/beda343d95bc/processor-tests/humans/disambiguate_AndreaEg1.txt

Yes, I agree.

>   https://bitbucket.org/bdarcus/citeproc-test/src/beda343d95bc/processor-tests/humans/disambiguate_ByCiteRetainNamesOnFailureIfYearSuffixNotAvailable.txt

I'm not so sure, here. I think that instead of:

    Asthma et al. (1990); Asthma et al. (1990);
    Dropsy, Enteritis, X. Fever (2000); Dropsy, Enteritis, Y. Fever (2000)

it should be:

    Asthma, Bosworth Bronchitis, et al. (1990); Asthma, Beauregarde Bronchitis, et al. (1990);
    Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)


When disambiguate-add-names fails to disambiguate a cite, while in the
1.0 specification all names should be shown regardless "et-al"
limitations, the amendments now require the minimum effort to be used:

    If cites cannot be (fully) disambiguated by expanding the rendered names,
    and if ``disambiguate-add-names`` is set to "true", then the names still
    hidden as a result of et-al abbreviation after the disambiguation attempt of
    ``disambiguate-add-names`` are added one by one to all members of a set of
    ambiguous cites, until no more cites in the set can be disambiguated by
    adding *expanded* names.

This applies also to:

1. disambiguate_ByCiteBaseNameCountOnFailureIfYearSuffixAvailable
   Not: Asthma, Bronchitis, Cold (1990a); Asthma, Bronchitis, Cold (1990b);
        Dropsy, Enteritis, X. Fever (2000); Dropsy, Enteritis, Y. Fever (2000)

   But: Asthma, Bosworth Bronchitis, et al. (1990); Asthma, Beauregarde Bronchitis, et al. (1990);
        Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)

2. disambiguate_ByCiteGivennameExpandCrossNestedNames
   Not: J. Doe, Jane Roe, Robert Jones; J. Doe, Josephine Roe, R. Jones; J. Doe, Jane Roe, Richard Jones
   But: J. Doe, Jane Roe, Robert Jones; J. Doe, Josephine Roe, et al.; J. Doe, Jane Roe, Richard Jones

3. disambiguate_ByCiteRetainNamesOnFailureIfYearSuffixNotAvailable
   Not: Asthma et al. (1990); Asthma et al. (1990);
         Dropsy, Enteritis, X. Fever (2000); Dropsy, Enteritis, Y. Fever (2000)

   But: Asthma, Bosworth Bronchitis, et al. (1990); Asthma, Beauregarde Bronchitis, et al. (1990);
        Dropsy, Edward Enteritis, et al. (2000); Dropsy, Ernie Enteritis, et al. (2000)

4. disambiguate_AllNamesBaseNameCountOnFailureIfYearSuffixAvailable: the
   first part is not correct (this is the old behavior).
   Not: Asthma, Bronchitis, Cold (1990a); Asthma, Bronchitis, Cold (1990b);
   But: Asthma et al. (1990a); Asthma et al. (1990b);

5. disambiguate_YearSuffixAtTwoLevels: I'm not entirely sure, here.
   Not: Smith, Jones &#38; Brown (1986a); Smith, Jones &#38; Brown (1986b);
        Smith, Jones, Brown, et al. (1986a); Smith, Jones, Brown, et al. (1986b)
   But: Smith et al. (1986a); Smith et al. (1986b);
        Smith et al. (1986c); Smith et al. (1986d)

Other problematic tests:

- disambiguate_ByCiteGivennameShortFormInitializeWith: initialize-with
  is set and so the full name (Smith) should be shown. And so:
  Not: Roe
       J Doe; A Doe
       Smith; Smith
  But: Roe
       J Doe; A Doe
       Thomas Smith; Ted Smith

- disambiguate_ByCiteDisambiguateCondition: "disambiguate" condition
  should be applied *afetr* year-suffix if the year suffix is not enough:

  Not: Doe &#38; Roe, <i>Book A</i> (2000); Doe &#38; Roe, <i>Book B</i> (2000)
  But: Doe et al. (2000a); Doe et al. (2000b)

I would also like to address the problem of those tests implying a
stateful processor. We could move them in a different sub-directory,
maybe. These are the ones I remember in the disambiguate group:

disambiguate_AllNamesSimpleSequence
disambiguate_DisambiguateWithThree
disambiguate_DisambiguateWithThree2
disambiguate_YearSuffixFiftyTwoEntries
disambiguate_YearSuffixAtTwoLevels


Thanks,
-- 
andrea

------------------------------------------------------------------------------
Get your Android app more play: Bring it to the BlackBerry PlayBook 
in minutes. BlackBerry App World&#153; now supports Android&#153; Apps 
for the BlackBerry&reg; PlayBook&#153;. Discover just how easy and simple 
it is! http://p.sf.net/sfu/android-dev2dev
_______________________________________________
xbiblio-devel mailing list
xbiblio-devel@lists.sourceforge.net
https://lists.sourceforge.net/lists/listinfo/xbiblio-devel
